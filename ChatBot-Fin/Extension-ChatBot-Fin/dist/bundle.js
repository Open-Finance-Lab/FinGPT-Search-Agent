/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function e(e,t){var n=window.location.href;return fetch("http://127.0.0.1:8000/log_question/?question=".concat(encodeURIComponent(e),"&button=").concat(encodeURIComponent(t),"&current_url=").concat(encodeURIComponent(n)),{method:"GET"}).then((function(e){return e.json()})).then((function(e){return"success"!==e.status&&console.error("Failed to log question"),e})).catch((function(e){throw console.error("Error logging question:",e),e}))}var t=["o1-preview","gpt-4o","deepseek-reasoner"],n="o1-preview";function r(){return n}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=performance.now(),o=document.getElementById("respons");a(o,"your_question",e);var i=a(o,"agent_response","FinGPT: Loading..."),c=document.getElementById("ragSwitch").checked,l=r();(function(e,t,n,r){var o=encodeURIComponent(e);return fetch("http://127.0.0.1:8000/".concat(n?"get_adv_response":"get_chat_response","/?question=").concat(o,"&models=").concat(t,"&is_advanced=").concat(n,"&use_rag=").concat(r),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){throw console.error("There was a problem with your fetch operation:",e),e}))})(e,l,t,c).then((function(e){var t=performance.now()-n;console.log("Time taken for response: ".concat(t," ms"));var r=e.resp[l];r?r.startsWith("The following file(s) are missing")?i.innerText="FinGPT: Error - ".concat(r):i.innerText="FinGPT: ".concat(r):i.innerText="FinGPT: (No response from server)",document.getElementById("textbox").value="",o.scrollTop=o.scrollHeight})).catch((function(e){console.error("There was a problem with your fetch operation:",e),i.innerText="FinGPT: Failed to load response."}))}function a(e,t,n){var r=document.createElement("span");return r.className=t,r.innerText=n,e.appendChild(r),r}function i(){var e=document.getElementById("respons"),t=document.getElementById("source_urls");e.innerHTML="",t&&(t.innerHTML=""),fetch("http://127.0.0.1:8000/clear_messages/",{method:"POST"}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).catch((function(e){throw console.error("There was a problem with your fetch operation:",e),e})).then((function(e){console.log(e)})).catch((function(e){console.error("There was a problem clearing messages:",e)}))}function c(){var t=document.getElementById("textbox").value;t?(o(t,!1),e(t,"Ask"),document.getElementById("textbox").value=""):alert("Please enter a question.")}function l(){var t=document.getElementById("textbox").value.trim();""!==t?(o(t,!0),e(t,"Advanced Ask"),document.getElementById("textbox").value=""):alert("Please enter a message.")}function s(){var e=document.createElement("div");return e.id="add_link_button",e.innerText="+",e.onclick=function(){var t,n=prompt("Enter a new preferred URL:");n&&(t=n,fetch("http://127.0.0.1:8000/api/add_preferred_url/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"url=".concat(encodeURIComponent(t))}).then((function(e){return e.json()})).catch((function(e){throw console.error("Error adding preferred link:",e),e}))).then((function(t){if("success"===t.status){var r=document.getElementById("preferred_links_content"),o=document.createElement("div");o.className="preferred-link-item",o.innerText=n,r.insertBefore(o,e)}else alert("Failed to add the new URL.")})).catch((function(e){return console.error("Error adding preferred link:",e)}))},e}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(){d=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var a=t&&t.prototype instanceof w?t:w,i=Object.create(a.prototype),c=new N(r||[]);return o(i,"_invoke",{value:P(e,n,c)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var f="suspendedStart",m="suspendedYield",v="executing",y="completed",g={};function w(){}function x(){}function b(){}var E={};s(E,i,(function(){return this}));var k=Object.getPrototypeOf,C=k&&k(k(I([])));C&&C!==n&&r.call(C,i)&&(E=C);var T=b.prototype=w.prototype=Object.create(E);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,a,i,c){var l=h(e[o],e,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==u(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function P(t,n,r){var o=f;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=j(c,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var s=h(t,n,r);if("normal"===s.type){if(o=r.done?y:m,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=y,r.method="throw",r.arg=s.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=h(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(u(t)+" is not iterable")}return x.prototype=b,o(T,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:x,configurable:!0}),x.displayName=s(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},_(L.prototype),s(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new L(p(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(T),s(T,l,"Generator"),s(T,i,(function(){return this})),s(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function p(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,c,"next",e)}function c(e){p(a,r,o,i,c,"throw",e)}i(void 0)}))}}function f(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new m(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function m(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return m=function(e){this.s=e,this.n=e.next},m.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new m(e)}function v(e,r,o){var a=document.createElement("div");a.style.display="none",a.id="settings_window";var i=document.createElement("label");i.innerText="Light Mode";var c=document.createElement("input");c.type="checkbox",c.onchange=function(){return document.body.classList.toggle("light-mode")},i.appendChild(c),a.appendChild(i);var l=document.createElement("div");l.id="model_selection_container";var u=document.createElement("div");u.id="model_selection_header",u.innerText="Model: ".concat(n);var p=document.createElement("span");p.innerText="⯆",u.appendChild(p),l.appendChild(u);var m=document.createElement("div");m.id="model_selection_content",m.style.display="none",t.forEach((function(e){var t=document.createElement("div");t.className="model-selection-item",t.innerText=e,e===n&&t.classList.add("selected-model"),t.onclick=function(){return n=t,r=e,document.querySelectorAll(".model-selection-item").forEach((function(e){return e.classList.remove("selected-model")})),window.selectedModel=r,n.classList.add("selected-model"),u.innerText="Model: ".concat(r),void u.appendChild(p);var n,r},m.appendChild(t)})),l.appendChild(m),a.appendChild(l),u.onclick=function(){m.style.display="none"===m.style.display?"block":"none",p.innerText="none"===m.style.display?"⯆":"⯅"};var v=document.createElement("div");v.id="preferred_links_container";var y=document.createElement("div");y.id="preferred_links_header",y.innerText="Preferred Links";var g=document.createElement("span");g.innerText="⯆",y.appendChild(g),v.appendChild(y);var w=document.createElement("div");function x(e){return b.apply(this,arguments)}function b(){return(b=h(d().mark((function e(t){var n,r,o,a,i,c,l,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.pdfjsLib||window.pdf||window.pdfjsNamespace,console.log("PDF.js loaded:",void 0!==n),console.log("Mammoth loaded:",void 0!==window.mammoth),n&&(n.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js"),e.next=6,t.arrayBuffer();case 6:return r=e.sent,e.next=9,n.getDocument({data:r}).promise;case 9:o=e.sent,a="",i=0;case 12:if(!(i<o.numPages)){e.next=24;break}return e.next=15,o.getPage(i+1);case 15:return c=e.sent,e.next=18,c.getTextContent();case 18:l=e.sent,s=l.items.map((function(e){return e.str})).join(" "),a+=s+"\n";case 21:i++,e.next=12;break;case 24:return e.abrupt("return",a);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return(k=h(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:return n=e.sent,e.next=5,mammoth.extractRawText({arrayBuffer:n});case 5:return r=e.sent,e.abrupt("return",r.value);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}w.id="preferred_links_content",y.onclick=function(){var e="none"===w.style.display;w.style.display=e?"block":"none",g.innerText=e?"⯅":"⯆"};var C="",T=document.createElement("label");T.innerText="Local RAG",T.setAttribute("for","ragSwitch");var _=document.createElement("input");_.type="checkbox",_.name="ragSwitch",_.id="ragSwitch",_.style.transform="translate(5px, 2px)",_.disabled=!0,_.onchange=h(d().mark((function e(){var t,n,r,o,a,i,c,l,s,u,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("switch value:",_.checked),!_.checked||""==C){e.next=41;break}console.log("BODY:",JSON.stringify({filePaths:[C]})),t=[],n=!1,r=!1,e.prev=6,a=f(C.values());case 8:return e.next=10,a.next();case 10:if(!(n=!(i=e.sent).done)){e.next=16;break}"file"===(c=i.value).kind&&t.push(c);case 13:n=!1,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),r=!0,o=e.t0;case 22:if(e.prev=22,e.prev=23,!n||null==a.return){e.next=27;break}return e.next=27,a.return();case 27:if(e.prev=27,!r){e.next=30;break}throw o;case 30:return e.finish(27);case 31:return e.finish(22);case 32:return l=t.map(function(){var e=h(d().mark((function e(t){var n,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFile();case 2:if(n=e.sent,r=n.name.split(".").pop().toLowerCase(),console.log("[DEBUG] extension: ".concat(r)),o="hello","txt"!==r){e.next=12;break}return e.next=9,n.text();case 9:o=e.sent,e.next=25;break;case 12:if("pdf"!==r){e.next=18;break}return e.next=15,x(n);case 15:o=e.sent,e.next=25;break;case 18:if("docx"!==r){e.next=24;break}return e.next=21,E(n);case 21:o=e.sent,e.next=25;break;case 24:console.warn("Unsupported file type: ".concat(n.name));case 25:return console.log("[DEBUG] extension: ".concat(o)),e.abrupt("return",{name:n.name,content:o});case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=35,Promise.all(l);case 35:s=e.sent,console.log("filesdata: ",s),u=new FormData,p=new Blob([JSON.stringify({filePaths:s})],{type:"application/json"}),u.append("json_data",p,"data.json"),fetch("http://127.0.0.1:8000/api/folder_path",{method:"POST",body:u}).then((function(e){return e.json()})).then((function(e){e.message?console.log("Success:",e.message):e.error&&console.error("Error:",e.error)})).catch((function(e){console.error("Error processing data:",e)}));case 41:case"end":return e.stop()}}),e,null,[[6,18,22,32],[23,,27,31]])})));var L=document.createElement("form"),P=document.createElement("label");P.innerText="Write the path of local directory you wish to use (ex. C:\\Users\\user\\test):",P.setAttribute("for","ragPath");var j=document.createElement("input");j.type="text",j.name="ragPath",j.id="ragPath",j.style.width="100%";var S=document.createElement("button");S.type="button",S.innerText="Select Directory",S.className="rag-button",S.id="selectDirectory",S.onclick=h(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!("showDirectoryPicker"in window)){e.next=11;break}return e.next=4,window.showDirectoryPicker();case 4:t=e.sent,C=t,j.value=C.name,_.disabled=!1,console.log("Selected directory:",C),e.next=12;break;case 11:alert("Your browser doesn't support directory selection. Please enter the path manually.");case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error selecting directory:",e.t0),"AbortError"!==e.t0.name&&alert("Error selecting directory: "+e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));var B=document.createElement("input");B.type="submit",B.value="Submit",B.className="rag-button",B.id="ragFormSubmit",L.onsubmit=function(e){return e.preventDefault(),""!=j.value&&(C=j.value,_.disabled=!1),!1};var N=document.createElement("input");return N.type="button",N.value="Clear",N.className="rag-button",N.id="clearRagPath",N.onclick=function(){C="",j.value="",_.disabled=!0},L.appendChild(P),L.appendChild(j),L.appendChild(S),L.appendChild(document.createElement("br")),L.appendChild(B),L.appendChild(N),w.appendChild(s()),v.appendChild(w),a.appendChild(v),a.appendChild(T),a.appendChild(_),a.appendChild(L),r.onclick=function(t){t.stopPropagation();var n=r.getBoundingClientRect(),o=n.bottom+(e.value?0:window.scrollY),i=n.left+(e.value?0:window.scrollX);a.style.top="".concat(o,"px"),a.style.left="".concat(i,"px"),a.style.display="none"===a.style.display?"block":"none",a.style.position=e.value?"fixed":"absolute","block"===a.style.display&&fetch("http://127.0.0.1:8000/api/get_preferred_urls/").then((function(e){return e.json()})).catch((function(e){throw console.error("Error loading preferred links:",e),e})).then((function(e){var t=document.getElementById("preferred_links_content");t.innerHTML="",e.urls.length>0&&e.urls.forEach((function(e){var n=document.createElement("div");n.className="preferred-link-item",n.innerText=e,t.appendChild(n)}));var n=document.getElementById("add_link_button")||s();t.appendChild(n)})).catch((function(e){return console.error("Error loading preferred links:",e)}))},document.addEventListener("click",(function(e){"block"!==a.style.display||a.contains(e.target)||r.contains(e.target)||o.contains(e.target)||(a.style.display="none")})),a}var y=window.location.href.toString();console.log("Current page: ",y);var g=document.body.innerText||"";encodeURIComponent(g),function(e,t){return fetch("http://127.0.0.1:8000/input_webtext/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({textContent:e,currentUrl:t})}).then((function(e){if(!e.ok)throw new Error("Network response was not ok (status: ".concat(e.status,")"));return e.json()})).then((function(e){return console.log("Response from server:",e),e})).catch((function(e){throw console.error("There was a problem with your fetch operation:",e),e}))}(g,y).then((function(e){console.log("Response from server:",e)})).catch((function(e){console.error("There was a problem with your fetch operation:",e)}));var w=function(){var e={value:!1},t=function(){var e=document.createElement("div");return e.id="draggableElement",e}(),n=document.createElement("span");n.innerText="⚙️",n.className="icon";var r=document.createElement("span");r.innerText="📌",r.id="position-mode-icon",r.className="icon";var o=v(e,n,r);r.onclick=function(){var a=t.getBoundingClientRect();if(e.value){t.style.position="absolute",t.style.top="".concat(a.top+window.scrollY,"px"),t.style.left="".concat(a.left+window.scrollX,"px"),r.innerText="📌";var i=n.getBoundingClientRect();o.style.position="absolute",o.style.top="".concat(i.bottom+window.scrollY,"px"),o.style.left="".concat(i.left+window.scrollX,"px")}else{t.style.position="fixed",t.style.top="".concat(a.top,"px"),t.style.left="".concat(a.left,"px"),r.innerText="⛓️‍💥";var c=n.getBoundingClientRect();o.style.position="fixed",o.style.top="".concat(c.bottom,"px"),o.style.left="".concat(c.left,"px")}e.value=!e.value};var a=function(e,t,n,r){var o=document.createElement("div");o.id="header",o.className="draggable";var a=document.createElement("span");a.innerText="FinGPT";var i=document.createElement("div");i.id="icon-container";var c=document.createElement("span");c.innerText="➖",c.className="icon",c.onclick=function(){e.classList.contains("minimized")?(e.classList.remove("minimized"),e.style.height="600px"):(e.classList.add("minimized"),e.style.height="60px")};var l=document.createElement("span");return l.innerText="❌",l.className="icon",l.onclick=function(){e.style.display="none"},i.appendChild(n),i.appendChild(r),i.appendChild(c),i.appendChild(l),o.appendChild(a),o.appendChild(i),o}(t,0,n,r),s=document.createElement("div");s.id="intro";var u=document.createElement("h2");u.innerText="Your personalized financial assistant.";var d=document.createElement("p");d.id="subtitleText",d.innerText="Ask me something!",s.appendChild(d),s.appendChild(u),s.appendChild(d);var p=document.createElement("div");p.id="content";var h=document.createElement("div");h.id="respons",p.appendChild(h);var f=function(){var e=document.createElement("div");e.id="inputContainer";var t=document.createElement("div");t.id="modeButtonsContainer";var n=document.createElement("button");n.id="textModeButton",n.innerText="Text Mode",n.classList.add("mode-button","active-mode"),t.appendChild(n),e.appendChild(t);var r=document.createElement("input");r.type="text",r.id="textbox",r.placeholder="Type your question here...",r.addEventListener("keydown",(function(e){"Enter"===e.key&&c()})),e.appendChild(r);var o=document.createElement("div");o.id="buttonContainer";var a=document.createElement("button");a.id="askButton",a.innerText="Ask",a.onclick=c;var s=document.createElement("button");s.id="advAskButton",s.innerText="Advanced Ask",s.onclick=l,o.appendChild(a),o.appendChild(s);var u=document.createElement("div");u.className="button-row";var d=document.createElement("button");d.innerText="Clear",d.className="clear-button",d.onclick=i;var p=document.createElement("button");return p.innerText="Sources",p.className="sources-button",p.onclick=function(){!function(e){var t=document.getElementById("sources_window"),n=document.getElementById("loading_spinner"),r=document.getElementById("source_urls");t.style.display="block",n.style.display="block",r.style.display="none",function(e){return fetch("http://127.0.0.1:8000/get_source_urls/?query=".concat(String(e)),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){throw console.error("There was a problem with your fetch operation:",e),e}))}(e).then((function(e){console.log(e.resp);var t=e.resp;r.innerHTML="",t.forEach((function(e){var t=e[0],n=document.createElement("a");n.href=t,n.innerText=t,n.target="_blank";var o=document.createElement("li");o.appendChild(n),o.classList.add("source-item"),r.appendChild(o)})),n.style.display="none",r.style.display="block"})).catch((function(e){console.error("There was a problem getting sources:",e),n.style.display="none"}))}("")},u.appendChild(p),u.appendChild(d),{inputContainer:e,buttonContainer:o,buttonRow:u}}(),m=f.inputContainer,y=f.buttonContainer,g=f.buttonRow,w=document.createElement("div");w.id="sources_window",w.style.display="none";var x=document.createElement("div");x.id="sources_window_header";var b=document.createElement("h2");b.innerText="Sources";var E=document.createElement("span");E.innerText="❌",E.className="icon",E.onclick=function(){w.style.display="none"},x.appendChild(b),x.appendChild(E);var k=document.createElement("div");k.id="loading_spinner",k.className="spinner",k.style.display="none";var C=document.createElement("ul");C.id="source_urls",w.appendChild(x),w.appendChild(k),w.appendChild(C),t.appendChild(a),t.appendChild(s),t.appendChild(p),t.appendChild(g),t.appendChild(m),t.appendChild(y),document.body.appendChild(w),document.body.appendChild(o),document.body.appendChild(t),t.style.position="absolute",t.style.top="10%",t.style.left="10%",t.style.width="450px",t.style.height="650px",function(e){var t,n,r,o,a,i,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];function s(r){r.preventDefault();var o=r.clientX-t+(l?0:window.scrollX),a=r.clientY-n+(l?0:window.scrollY);e.style.left="".concat(o,"px"),e.style.top="".concat(a,"px");var i=document.getElementById("sources_window");i.style.left="".concat(o+e.offsetWidth+c,"px"),i.style.top="".concat(a,"px")}function u(t){t.preventDefault();var n=a+(t.clientX-r),l=i+(t.clientY-o);n>250&&(e.style.width="".concat(n,"px")),l>300&&(e.style.height="".concat(l,"px")),document.getElementById("sources_window").style.left="".concat(e.offsetLeft+e.offsetWidth+c,"px")}function d(){document.removeEventListener("mousemove",s),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d)}e.querySelector(".draggable").addEventListener("mousedown",(function(c){if(!["INPUT","TEXTAREA","BUTTON","A"].includes(c.target.tagName)&&"position-mode-icon"!==c.target.id){c.preventDefault();var l=e.getBoundingClientRect(),p=c.clientX>l.right-10,h=c.clientY>l.bottom-10;p||h?(r=c.clientX,o=c.clientY,a=l.width,i=l.height,document.addEventListener("mousemove",u)):(t=c.clientX-l.left,n=c.clientY-l.top,document.addEventListener("mousemove",s)),document.addEventListener("mouseup",d)}}))}(t,10,e.value);var T=t.getBoundingClientRect();return w.style.left="".concat(T.right+10,"px"),w.style.top="".concat(T.top,"px"),console.log("initalized"),{popup:t,settings_window:o,sources_window:w,searchQuery:""}}();w.popup,w.settings_window,w.sources_window,w.searchQuery})();
//# sourceMappingURL=bundle.js.map