{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://extension-chatbot-fin/./src/modules/api.js","webpack://extension-chatbot-fin/./src/modules/config.js","webpack://extension-chatbot-fin/./src/modules/handlers.js","webpack://extension-chatbot-fin/./src/modules/helpers.js","webpack://extension-chatbot-fin/./src/modules/components/settings_window.js","webpack://extension-chatbot-fin/./src/content_archive.js","webpack://extension-chatbot-fin/./src/modules/ui.js","webpack://extension-chatbot-fin/./src/modules/components/popup.js","webpack://extension-chatbot-fin/./src/modules/components/header.js","webpack://extension-chatbot-fin/./src/modules/components/chat.js"],"sourcesContent":["// api.js\n\n// Function to POST JSON to the server endpoint\nfunction postWebTextToServer(textContent, currentUrl) {\n    return fetch(\"http://127.0.0.1:8000/input_webtext/\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n            textContent: textContent,\n            currentUrl: currentUrl\n        }),\n    })\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(`Network response was not ok (status: ${response.status})`);\n            }\n            return response.json();\n        })\n        .then(data => {\n            console.log(\"Response from server:\", data);\n            return data;\n        })\n        .catch(error => {\n            console.error(\"There was a problem with your fetch operation:\", error);\n            throw error;\n        });\n}\n\n// Function to get chat response from server\nfunction getChatResponse(question, selectedModel, isAdvanced, useRAG) {\n    const encodedQuestion = encodeURIComponent(question);\n    const endpoint = isAdvanced ? 'get_adv_response' : 'get_chat_response';\n\n    return fetch(\n        `http://127.0.0.1:8000/${endpoint}/?question=${encodedQuestion}&models=${selectedModel}&is_advanced=${isAdvanced}&use_rag=${useRAG}`,\n        { method: 'GET' }\n    )\n        .then(response => response.json())\n        .catch(error => {\n            console.error('There was a problem with your fetch operation:', error);\n            throw error;\n        });\n}\n\n// Function to clear messages\nfunction clearMessages() {\n    return fetch(`http://127.0.0.1:8000/clear_messages/`, { method: \"POST\" })\n        .then(response => {\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            return response.json();\n        })\n        .catch(error => {\n            console.error('There was a problem with your fetch operation:', error);\n            throw error;\n        });\n}\n\n// Function to get sources\nfunction getSourceUrls(searchQuery) {\n    return fetch(`http://127.0.0.1:8000/get_source_urls/?query=${String(searchQuery)}`, { method: \"GET\" })\n        .then(response => response.json())\n        .catch(error => {\n            console.error('There was a problem with your fetch operation:', error);\n            throw error;\n        });\n}\n\n// Function to log question\nfunction logQuestion(question, button) {\n    const currentUrl = window.location.href;\n\n    return fetch(\n        `http://127.0.0.1:8000/log_question/?question=${encodeURIComponent(question)}&button=${encodeURIComponent(button)}&current_url=${encodeURIComponent(currentUrl)}`,\n        { method: \"GET\" }\n    )\n        .then(response => response.json())\n        .then(data => {\n            if (data.status !== 'success') {\n                console.error('Failed to log question');\n            }\n            return data;\n        })\n        .catch(error => {\n            console.error('Error logging question:', error);\n            throw error;\n        });\n}\n\n// Function to add preferred URL\nfunction addPreferredUrl(url) {\n    return fetch('http://127.0.0.1:8000/api/add_preferred_url/', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body: `url=${encodeURIComponent(url)}`\n    })\n        .then(response => response.json())\n        .catch(error => {\n            console.error('Error adding preferred link:', error);\n            throw error;\n        });\n}\n\n// Function to get preferred URLs\nfunction getPreferredUrls() {\n    return fetch('http://127.0.0.1:8000/api/get_preferred_urls/')\n        .then(response => response.json())\n        .catch(error => {\n            console.error('Error loading preferred links:', error);\n            throw error;\n        });\n}\n\nexport { \n    postWebTextToServer, \n    getChatResponse, \n    clearMessages, \n    getSourceUrls, \n    logQuestion,\n    addPreferredUrl,\n    getPreferredUrls\n};","// config.js\n\n// Available models\nconst availableModels = [\"o1-preview\", \"gpt-4o\", \"deepseek-reasoner\"];\n\n// Initialize a single selected model\nlet selectedModel = \"o1-preview\";\n\nfunction getSelectedModel() {\n    return selectedModel;\n}\n\nexport { availableModels, selectedModel, getSelectedModel };","// handlers.js\nimport { appendChatElement } from './helpers.js';\nimport { getChatResponse } from './api.js';\nimport { getSelectedModel, selectedModel } from './config.js';\n\n\n// Function to handle chat responses (single model)\nfunction handleChatResponse(question, isAdvanced = false) {\n    const startTime = performance.now();\n    const responseContainer = document.getElementById('respons');\n\n    // Show the user's question\n    appendChatElement(responseContainer, 'your_question', question);\n\n    // Placeholder \"Loading...\" text\n    const loadingElement = appendChatElement(\n        responseContainer,\n        'agent_response',\n        `FinGPT: Loading...`\n    );\n\n    // Read the RAG checkbox state\n    const useRAG = document.getElementById('ragSwitch').checked;\n\n    const selectedModel = getSelectedModel();\n\n    getChatResponse(question, selectedModel, isAdvanced, useRAG)\n        .then(data => {\n            const endTime = performance.now();\n            const responseTime = endTime - startTime;\n            console.log(`Time taken for response: ${responseTime} ms`);\n\n            // Get the response for the selected model\n            const modelResponse = data.resp[selectedModel];\n\n            if (!modelResponse) {\n                // Safeguard in case backend does not return something\n                loadingElement.innerText = `FinGPT: (No response from server)`;\n            } else if (modelResponse.startsWith(\"The following file(s) are missing\")) {\n                loadingElement.innerText = `FinGPT: Error - ${modelResponse}`;\n            } else {\n                loadingElement.innerText = `FinGPT: ${modelResponse}`;\n            }\n\n            // Clear the user textbox\n            document.getElementById('textbox').value = '';\n            responseContainer.scrollTop = responseContainer.scrollHeight;\n        })\n        .catch(error => {\n            console.error('There was a problem with your fetch operation:', error);\n            loadingElement.innerText = `FinGPT: Failed to load response.`;\n        });\n}\n\n// Function to handle image response\nfunction handleImageResponse(question, description) {\n    const responseContainer = document.getElementById('respons');\n    appendChatElement(responseContainer, 'your_question', question);\n\n    const responseDiv = document.createElement('div');\n    responseDiv.className = 'agent_response';\n    responseDiv.innerText = description;\n    responseContainer.appendChild(responseDiv);\n\n    responseContainer.scrollTop = responseContainer.scrollHeight;\n}\n\nexport { handleChatResponse, handleImageResponse };","// helpers.js\nimport { clearMessages, getSourceUrls, addPreferredUrl, getPreferredUrls, logQuestion } from './api.js';\nimport { handleChatResponse, handleImageResponse } from './handlers.js';\n\n// Function to append chat elements\nfunction appendChatElement(parent, className, text) {\n    const element = document.createElement('span');\n    element.className = className;\n    element.innerText = text;\n    parent.appendChild(element);\n    return element;\n}\n\n// Function to clear chat\nfunction clear() {\n    const response = document.getElementById('respons');\n    const sourceurls = document.getElementById('source_urls');\n\n    response.innerHTML = \"\";\n    if (sourceurls) {\n        sourceurls.innerHTML = \"\";\n    }\n    \n    clearMessages()\n        .then(data => {\n            console.log(data);\n        })\n        .catch(error => {\n            console.error('There was a problem clearing messages:', error);\n        });\n}\n\n// Ask button click\nfunction get_chat_response() {\n    const question = document.getElementById('textbox').value;\n\n    if (question) {\n        handleChatResponse(question, false);\n        logQuestion(question, 'Ask');\n        document.getElementById('textbox').value = '';\n    } else {\n        alert(\"Please enter a question.\");\n    }\n}\n\n// Advanced Ask button click\nfunction get_adv_chat_response() {\n    const question = document.getElementById('textbox').value.trim();\n\n    if (question === '') {\n        alert(\"Please enter a message.\");\n        return;\n    }\n\n    // Text Processing Mode\n    handleChatResponse(question, true);\n    logQuestion(question, 'Advanced Ask');\n\n    document.getElementById('textbox').value = '';\n}\n\n// Function to get sources\nfunction get_sources(searchQuery) {\n    const sources_window = document.getElementById('sources_window');\n    const loadingSpinner = document.getElementById('loading_spinner');\n    const source_urls = document.getElementById('source_urls');\n\n    sources_window.style.display = 'block';\n    loadingSpinner.style.display = 'block'; // Show the spinner\n    source_urls.style.display = 'none'; // Hide the source list initially\n\n    getSourceUrls(searchQuery)\n        .then(data => {\n            console.log(data[\"resp\"]);\n            const sources = data[\"resp\"];\n            source_urls.innerHTML = '';\n\n            sources.forEach(source => {\n                const url = source[0];\n                const link = document.createElement('a');\n                link.href = url;\n                link.innerText = url;\n                link.target = \"_blank\";\n\n                const listItem = document.createElement('li');\n                listItem.appendChild(link);\n                listItem.classList.add('source-item');\n\n                source_urls.appendChild(listItem);\n            });\n\n            loadingSpinner.style.display = 'none'; // Hide spinner\n            source_urls.style.display = 'block'; // Show source list\n        })\n        .catch(error => {\n            console.error('There was a problem getting sources:', error);\n            loadingSpinner.style.display = 'none'; // Hide spinner in case of error\n        });\n}\n\n// Function to load preferred links\nfunction loadPreferredLinks() {\n    getPreferredUrls()\n        .then(data => {\n            const preferredLinksContent = document.getElementById('preferred_links_content');\n            preferredLinksContent.innerHTML = ''; // Clear existing content\n            \n            if (data.urls.length > 0) {\n                data.urls.forEach(link => {\n                    const linkItem = document.createElement('div');\n                    linkItem.className = 'preferred-link-item';\n                    linkItem.innerText = link;\n                    preferredLinksContent.appendChild(linkItem);\n                });\n            }\n            \n            // Re-add the '+' button\n            const addLinkButton = document.getElementById('add_link_button') || createAddLinkButton();\n            preferredLinksContent.appendChild(addLinkButton);\n        })\n        .catch(error => console.error('Error loading preferred links:', error));\n}\n\n// Function to create Add Link Button\nfunction createAddLinkButton() {\n    const addLinkButton = document.createElement('div');\n    addLinkButton.id = \"add_link_button\";\n    addLinkButton.innerText = \"+\";\n    addLinkButton.onclick = function() {\n        const newLink = prompt(\"Enter a new preferred URL:\");\n        if (newLink) {\n            addPreferredUrl(newLink)\n                .then(data => {\n                    if (data.status === 'success') {\n                        const preferredLinksContent = document.getElementById('preferred_links_content');\n                        const newLinkItem = document.createElement('div');\n                        newLinkItem.className = 'preferred-link-item';\n                        newLinkItem.innerText = newLink;\n                        preferredLinksContent.insertBefore(newLinkItem, addLinkButton);\n                    } else {\n                        alert('Failed to add the new URL.');\n                    }\n                })\n                .catch(error => console.error('Error adding preferred link:', error));\n        }\n    };\n    return addLinkButton;\n}\n\n// Function to make an element draggable and resizable\nfunction makeDraggableAndResizable(element, sourceWindowOffsetX = 10, isFixedMode = false) {\n    let isDragging = false;\n    let isResizing = false;\n    let offsetX, offsetY, startX, startY, startWidth, startHeight;\n\n    element.querySelector('.draggable').addEventListener('mousedown', function(e) {\n        if (['INPUT', 'TEXTAREA', 'BUTTON', 'A'].includes(e.target.tagName) || 'position-mode-icon' === e.target.id) {\n            return;\n        }\n\n        e.preventDefault();\n\n        const rect = element.getBoundingClientRect();\n        const isRightEdge = e.clientX > rect.right - 10;\n        const isBottomEdge = e.clientY > rect.bottom - 10;\n\n        if (isRightEdge || isBottomEdge) {\n            isResizing = true;\n            startX = e.clientX;\n            startY = e.clientY;\n            startWidth = rect.width;\n            startHeight = rect.height;\n            document.addEventListener('mousemove', resizeElement);\n        } else {\n            isDragging = true;\n            offsetX = e.clientX - rect.left;\n            offsetY = e.clientY - rect.top;\n            document.addEventListener('mousemove', dragElement);\n        }\n\n        document.addEventListener('mouseup', closeDragOrResizeElement);\n    });\n\n    function dragElement(e) {\n        e.preventDefault();\n        const newX = e.clientX - offsetX + (isFixedMode ? 0 : window.scrollX);\n        const newY = e.clientY - offsetY + (isFixedMode ? 0 : window.scrollY);\n        element.style.left = `${newX}px`;\n        element.style.top = `${newY}px`;\n\n        // Move sources window with main popup\n        const sourcesWindow = document.getElementById('sources_window');\n        sourcesWindow.style.left = `${newX + element.offsetWidth + sourceWindowOffsetX}px`;\n        sourcesWindow.style.top = `${newY}px`;\n    }\n\n    function resizeElement(e) {\n        e.preventDefault();\n        const newWidth = startWidth + (e.clientX - startX);\n        const newHeight = startHeight + (e.clientY - startY);\n        if (newWidth > 250) {\n            element.style.width = `${newWidth}px`;\n        }\n        if (newHeight > 300) {\n            element.style.height = `${newHeight}px`;\n        }\n\n        // Move sources window with main popup\n        const sourcesWindow = document.getElementById('sources_window');\n        sourcesWindow.style.left = `${element.offsetLeft + element.offsetWidth + sourceWindowOffsetX}px`;\n    }\n\n    function closeDragOrResizeElement() {\n        document.removeEventListener('mousemove', dragElement);\n        document.removeEventListener('mousemove', resizeElement);\n        document.removeEventListener('mouseup', closeDragOrResizeElement);\n        isDragging = false;\n        isResizing = false;\n    }\n}\n\nexport { appendChatElement, clear, get_chat_response, get_adv_chat_response, get_sources, \n    loadPreferredLinks, createAddLinkButton, makeDraggableAndResizable };","// settings_window.js\nimport { availableModels, selectedModel } from '../config.js';\nimport { loadPreferredLinks, createAddLinkButton } from '../helpers.js';\n\nfunction createSettingsWindow(isFixedModeRef, settingsIcon, positionModeIcon) {\n    const settings_window = document.createElement('div');\n    settings_window.style.display = \"none\";\n    settings_window.id = \"settings_window\";\n\n    const label = document.createElement('label');\n    label.innerText = \"Light Mode\";\n    const lightSwitch = document.createElement('input');\n    lightSwitch.type = \"checkbox\";\n    lightSwitch.onchange = () => document.body.classList.toggle('light-mode');\n    label.appendChild(lightSwitch);\n    settings_window.appendChild(label);\n\n    const modelContainer = document.createElement('div');\n    modelContainer.id = \"model_selection_container\";\n\n    const modelHeader = document.createElement('div');\n    modelHeader.id = \"model_selection_header\";\n    modelHeader.innerText = `Model: ${selectedModel}`;\n\n    const modelToggleIcon = document.createElement('span');\n    modelToggleIcon.innerText = \"⯆\";\n\n    modelHeader.appendChild(modelToggleIcon);\n    modelContainer.appendChild(modelHeader);\n\n    const modelContent = document.createElement('div');\n    modelContent.id = \"model_selection_content\";\n    modelContent.style.display = \"none\";\n\n    function handleModelSelection(modelItem, modelName) {\n        document.querySelectorAll('.model-selection-item').forEach(item => item.classList.remove('selected-model'));\n        window.selectedModel = modelName;\n        modelItem.classList.add('selected-model');\n        modelHeader.innerText = `Model: ${modelName}`;\n        modelHeader.appendChild(modelToggleIcon);\n    }\n\n    availableModels.forEach(model => {\n        const item = document.createElement('div');\n        item.className = 'model-selection-item';\n        item.innerText = model;\n        if (model === selectedModel) item.classList.add('selected-model');\n        item.onclick = () => handleModelSelection(item, model);\n        modelContent.appendChild(item);\n    });\n\n    modelContainer.appendChild(modelContent);\n    settings_window.appendChild(modelContainer);\n\n    modelHeader.onclick = () => {\n        modelContent.style.display = modelContent.style.display === \"none\" ? \"block\" : \"none\";\n        modelToggleIcon.innerText = modelContent.style.display === \"none\" ? \"⯆\" : \"⯅\";\n    };\n\n    const preferredLinksContainer = document.createElement('div');\n    preferredLinksContainer.id = \"preferred_links_container\";\n\n    const preferredLinksHeader = document.createElement('div');\n    preferredLinksHeader.id = \"preferred_links_header\";\n    preferredLinksHeader.innerText = \"Preferred Links\";\n\n    const toggleIcon = document.createElement('span');\n    toggleIcon.innerText = \"⯆\";\n    preferredLinksHeader.appendChild(toggleIcon);\n    preferredLinksContainer.appendChild(preferredLinksHeader);\n\n    const preferredLinksContent = document.createElement('div');\n    preferredLinksContent.id = \"preferred_links_content\";\n    preferredLinksContent.appendChild(createAddLinkButton());\n\n    preferredLinksContainer.appendChild(preferredLinksContent);\n    settings_window.appendChild(preferredLinksContainer);\n\n    preferredLinksHeader.onclick = function () {\n        const isHidden = preferredLinksContent.style.display === \"none\";\n        preferredLinksContent.style.display = isHidden ? \"block\" : \"none\";\n        toggleIcon.innerText = isHidden ? \"⯅\" : \"⯆\";\n    };\n\n    const ragLabel = document.createElement('label');\n    ragLabel.innerText = \"Local RAG\";\n    const ragSwitch = document.createElement('input');\n    ragSwitch.type = \"checkbox\";\n    ragSwitch.id = \"ragSwitch\";\n    ragLabel.appendChild(ragSwitch);\n    settings_window.appendChild(ragLabel);\n\n    settingsIcon.onclick = function (event) {\n        event.stopPropagation();\n        const rect = settingsIcon.getBoundingClientRect();\n        const y = rect.bottom + (isFixedModeRef.value ? 0 : window.scrollY);\n        const x = rect.left + (isFixedModeRef.value ? 0 : window.scrollX);\n        settings_window.style.top = `${y}px`;\n        settings_window.style.left = `${x}px`;\n        settings_window.style.display = settings_window.style.display === 'none' ? 'block' : 'none';\n        settings_window.style.position = isFixedModeRef.value ? 'fixed' : 'absolute';\n        if (settings_window.style.display === 'block') loadPreferredLinks();\n    };\n\n    document.addEventListener('click', function (event) {\n        if (\n            settings_window.style.display === 'block' &&\n            !settings_window.contains(event.target) &&\n            !settingsIcon.contains(event.target) &&\n            !positionModeIcon.contains(event.target)\n        ) {\n            settings_window.style.display = 'none';\n        }\n    });\n\n    return settings_window;\n}\n\nexport { createSettingsWindow };\n","// content_archive.js\nimport { postWebTextToServer } from './modules/api.js';\nimport { createUI } from './modules/ui.js';\n\nconst currentUrl = window.location.href.toString();\nconsole.log(\"Current page: \", currentUrl);\n\nconst textContent = document.body.innerText || \"\";\nconst encodedContent = encodeURIComponent(textContent);\n\n// POST JSON to the server endpoint\npostWebTextToServer(textContent, currentUrl)\n    .then(data => {\n        console.log(\"Response from server:\", data);\n    })\n    .catch(error => {\n        console.error(\"There was a problem with your fetch operation:\", error);\n    });\n\n// Initialize UI\nconst { popup, settings_window, sources_window, searchQuery } = createUI();","// ui.js\nimport { get_chat_response, get_adv_chat_response, makeDraggableAndResizable } from './helpers.js';\nimport { createPopup } from './components/popup.js';\nimport { createHeader } from './components/header.js';\nimport { createChatInterface } from './components/chat.js';\nimport { createSettingsWindow } from './components/settings_window.js';\n\n// Function to create UI elements\nfunction createUI() {\n    let isFixedMode = false;\n    let searchQuery = '';\n\n    const isFixedModeRef = { value: isFixedMode }; // Pass-by-reference workaround\n\n    // Main popup\n    const popup = createPopup();\n\n    // Icons\n    const settingsIcon = document.createElement('span');\n    settingsIcon.innerText = \"⚙️\";\n    settingsIcon.className = \"icon\";\n\n    const positionModeIcon = document.createElement('span');\n    positionModeIcon.innerText = \"📌\";\n    positionModeIcon.id = \"position-mode-icon\";\n    positionModeIcon.className = \"icon\";\n\n    // Settings window\n    const settings_window = createSettingsWindow(isFixedModeRef, settingsIcon, positionModeIcon);\n\n    // Position mode toggle logic\n    positionModeIcon.onclick = function () {\n        const rect = popup.getBoundingClientRect();\n        if (isFixedModeRef.value) {\n            popup.style.position = \"absolute\";\n            popup.style.top = `${rect.top + window.scrollY}px`;\n            popup.style.left = `${rect.left + window.scrollX}px`;\n            positionModeIcon.innerText = \"📌\";\n\n            const settingsIconRect = settingsIcon.getBoundingClientRect();\n            settings_window.style.position = \"absolute\";\n            settings_window.style.top = `${settingsIconRect.bottom + window.scrollY}px`;\n            settings_window.style.left = `${settingsIconRect.left + window.scrollX}px`;\n        } else {\n            popup.style.position = \"fixed\";\n            popup.style.top = `${rect.top}px`;\n            popup.style.left = `${rect.left}px`;\n            positionModeIcon.innerText = \"⛓️‍💥\";\n\n            const settingsIconRect = settingsIcon.getBoundingClientRect();\n            settings_window.style.position = \"fixed\";\n            settings_window.style.top = `${settingsIconRect.bottom}px`;\n            settings_window.style.left = `${settingsIconRect.left}px`;\n        }\n        isFixedModeRef.value = !isFixedModeRef.value;\n    };\n\n    // Header\n    const header = createHeader(popup, settings_window, settingsIcon, positionModeIcon, isFixedModeRef);\n\n    // Intro\n    const intro = document.createElement('div');\n    intro.id = \"intro\";\n\n    const titleText = document.createElement('h2');\n    titleText.innerText = \"Your personalized financial assistant.\";\n\n    const subtitleText = document.createElement('p');\n    subtitleText.id = \"subtitleText\";\n    subtitleText.innerText = \"Ask me something!\";\n\n    intro.appendChild(subtitleText);\n    intro.appendChild(titleText);\n    intro.appendChild(subtitleText);\n\n    // Chat area\n    const content = document.createElement('div');\n    content.id = \"content\";\n    const responseContainer = document.createElement('div');\n    responseContainer.id = \"respons\";\n    content.appendChild(responseContainer);\n\n    const { inputContainer, buttonContainer, buttonRow } = createChatInterface(searchQuery);\n\n    // Sources window\n    const sources_window = document.createElement('div');\n    sources_window.id = \"sources_window\";\n    sources_window.style.display = 'none';\n\n    const sourcesHeader = document.createElement('div');\n    sourcesHeader.id = \"sources_window_header\";\n\n    const sourcesTitle = document.createElement('h2');\n    sourcesTitle.innerText = \"Sources\";\n\n    const sourcesCloseIcon = document.createElement('span');\n    sourcesCloseIcon.innerText = \"❌\";\n    sourcesCloseIcon.className = \"icon\";\n    sourcesCloseIcon.onclick = function () {\n        sources_window.style.display = 'none';\n    };\n\n    sourcesHeader.appendChild(sourcesTitle);\n    sourcesHeader.appendChild(sourcesCloseIcon);\n\n    const loadingSpinner = document.createElement('div');\n    loadingSpinner.id = \"loading_spinner\";\n    loadingSpinner.className = \"spinner\";\n    loadingSpinner.style.display = 'none';\n\n    const source_urls = document.createElement('ul');\n    source_urls.id = \"source_urls\";\n\n    sources_window.appendChild(sourcesHeader);\n    sources_window.appendChild(loadingSpinner);\n    sources_window.appendChild(source_urls);\n\n    // Mount everything\n    popup.appendChild(header);\n    popup.appendChild(intro);\n    popup.appendChild(content);\n    popup.appendChild(buttonRow);\n    popup.appendChild(inputContainer);\n    popup.appendChild(buttonContainer);\n\n    document.body.appendChild(sources_window);\n    document.body.appendChild(settings_window);\n    document.body.appendChild(popup);\n\n    // Position + interaction\n    popup.style.position = \"absolute\";\n    popup.style.top = \"10%\";\n    popup.style.left = \"10%\";\n    popup.style.width = '450px';\n    popup.style.height = '650px';\n\n    const sourceWindowOffsetX = 10;\n    makeDraggableAndResizable(popup, sourceWindowOffsetX, isFixedModeRef.value);\n\n    const popupRect = popup.getBoundingClientRect();\n    sources_window.style.left = `${popupRect.right + sourceWindowOffsetX}px`;\n    sources_window.style.top = `${popupRect.top}px`;\n\n    console.log(\"initalized\");\n\n    return {\n        popup,\n        settings_window,\n        sources_window,\n        searchQuery,\n    };\n}\n\nexport { get_chat_response, get_adv_chat_response, createUI };\n","// popup.js\nfunction createPopup() {\n    const popup = document.createElement('div');\n    popup.id = \"draggableElement\";\n    return popup;\n}\n\nexport { createPopup };\n","// header.js\nfunction createHeader(popup, settings_window, settingsIcon, positionModeIcon, isFixedModeRef) {\n    const header = document.createElement('div');\n    header.id = \"header\";\n    header.className = \"draggable\";\n\n    const title = document.createElement('span');\n    title.innerText = \"FinGPT\";\n\n    const iconContainer = document.createElement('div');\n    iconContainer.id = \"icon-container\";\n\n    const minimizeIcon = document.createElement('span');\n    minimizeIcon.innerText = \"➖\";\n    minimizeIcon.className = \"icon\";\n    minimizeIcon.onclick = function () {\n        if (popup.classList.contains('minimized')) {\n            popup.classList.remove('minimized');\n            popup.style.height = '600px';\n        } else {\n            popup.classList.add('minimized');\n            popup.style.height = '60px';\n        }\n    };\n\n    const closeIcon = document.createElement('span');\n    closeIcon.innerText = \"❌\";\n    closeIcon.className = \"icon\";\n    closeIcon.onclick = function () {\n        popup.style.display = 'none';\n    };\n\n    iconContainer.appendChild(settingsIcon);\n    iconContainer.appendChild(positionModeIcon);\n    iconContainer.appendChild(minimizeIcon);\n    iconContainer.appendChild(closeIcon);\n\n    header.appendChild(title);\n    header.appendChild(iconContainer);\n\n    return header;\n}\n\nexport { createHeader };\n","// chat.js\nimport { get_chat_response, get_adv_chat_response, clear, get_sources } from '../helpers.js';\n\nfunction createChatInterface(searchQuery) {\n    const inputContainer = document.createElement('div');\n    inputContainer.id = \"inputContainer\";\n\n    const modeButtonsContainer = document.createElement('div');\n    modeButtonsContainer.id = 'modeButtonsContainer';\n\n    const textModeButton = document.createElement('button');\n    textModeButton.id = 'textModeButton';\n    textModeButton.innerText = 'Text Mode';\n    textModeButton.classList.add('mode-button', 'active-mode');\n\n    modeButtonsContainer.appendChild(textModeButton);\n    inputContainer.appendChild(modeButtonsContainer);\n\n    const textbox = document.createElement(\"input\");\n    textbox.type = \"text\";\n    textbox.id = \"textbox\";\n    textbox.placeholder = \"Type your question here...\";\n    textbox.addEventListener(\"keydown\", function (event) {\n        if (event.key === \"Enter\") {\n            get_chat_response();\n        }\n    });\n    inputContainer.appendChild(textbox);\n\n    const buttonContainer = document.createElement('div');\n    buttonContainer.id = \"buttonContainer\";\n\n    const askButton = document.createElement('button');\n    askButton.id = 'askButton';\n    askButton.innerText = \"Ask\";\n    askButton.onclick = get_chat_response;\n\n    const advAskButton = document.createElement('button');\n    advAskButton.id = 'advAskButton';\n    advAskButton.innerText = \"Advanced Ask\";\n    advAskButton.onclick = get_adv_chat_response;\n\n    buttonContainer.appendChild(askButton);\n    buttonContainer.appendChild(advAskButton);\n\n    const buttonRow = document.createElement('div');\n    buttonRow.className = \"button-row\";\n\n    const clearButton = document.createElement('button');\n    clearButton.innerText = \"Clear\";\n    clearButton.className = \"clear-button\";\n    clearButton.onclick = clear;\n\n    const sourcesButton = document.createElement('button');\n    sourcesButton.innerText = \"Sources\";\n    sourcesButton.className = \"sources-button\";\n    sourcesButton.onclick = function () { get_sources(searchQuery); };\n\n    buttonRow.appendChild(sourcesButton);\n    buttonRow.appendChild(clearButton);\n\n    return { inputContainer, buttonContainer, buttonRow };\n}\n\nexport { createChatInterface };\n"],"names":["logQuestion","question","button","currentUrl","window","location","href","fetch","concat","encodeURIComponent","method","then","response","json","data","status","console","error","availableModels","selectedModel","getSelectedModel","handleChatResponse","isAdvanced","arguments","length","undefined","startTime","performance","now","responseContainer","document","getElementById","appendChatElement","loadingElement","useRAG","checked","encodedQuestion","getChatResponse","responseTime","log","modelResponse","resp","startsWith","innerText","value","scrollTop","scrollHeight","parent","className","text","element","createElement","appendChild","clear","sourceurls","innerHTML","ok","Error","get_chat_response","alert","get_adv_chat_response","trim","createAddLinkButton","addLinkButton","id","onclick","url","newLink","prompt","headers","body","preferredLinksContent","newLinkItem","insertBefore","createSettingsWindow","isFixedModeRef","settingsIcon","positionModeIcon","settings_window","style","display","label","lightSwitch","type","onchange","classList","toggle","modelContainer","modelHeader","modelToggleIcon","modelContent","forEach","model","item","add","modelItem","modelName","querySelectorAll","remove","preferredLinksContainer","preferredLinksHeader","toggleIcon","isHidden","ragLabel","ragSwitch","event","stopPropagation","rect","getBoundingClientRect","y","bottom","scrollY","x","left","scrollX","top","position","urls","link","linkItem","addEventListener","contains","target","toString","textContent","JSON","stringify","postWebTextToServer","_createUI","popup","createPopup","settingsIconRect","header","title","iconContainer","minimizeIcon","height","closeIcon","createHeader","intro","titleText","subtitleText","content","_createChatInterface","inputContainer","modeButtonsContainer","textModeButton","textbox","placeholder","key","buttonContainer","askButton","advAskButton","buttonRow","clearButton","sourcesButton","searchQuery","sources_window","loadingSpinner","source_urls","String","getSourceUrls","sources","source","listItem","get_sources","createChatInterface","sourcesHeader","sourcesTitle","sourcesCloseIcon","width","offsetX","offsetY","startX","startY","startWidth","startHeight","sourceWindowOffsetX","isFixedMode","dragElement","e","preventDefault","newX","clientX","newY","clientY","sourcesWindow","offsetWidth","resizeElement","newWidth","newHeight","offsetLeft","closeDragOrResizeElement","removeEventListener","querySelector","includes","tagName","isRightEdge","right","isBottomEdge","makeDraggableAndResizable","popupRect","createUI"],"sourceRoot":""}